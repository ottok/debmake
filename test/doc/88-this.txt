[[this]]
=== This package

The git repository (see http://anonscm.debian.org/gitweb/?p=collab-maint/debmake.git) is used to manage the development of the *debmake* package as follows.

----
 $ git clone https://alioth.debian.org/anonscm/git/collab-maint/debmake.git
 $ git checkout devel
----

The development of the *debmake* package is done on this *devel* branch:

* Hack both in the upstream portion and under the **debian/*** directory, just like the native Debian package source tree.
* Set the proper version strings before the release.
** Update the 'version-rev' string in the *debian/changelog* as if this is the non-native Debian package: *dch -r*
** Update the 'version' string in the *debmake/\_\_init__.py*.

After everuthing is completed, you package the source as follows.

----
 $ cd test; make; make clean; cd -
 $ git add -A . ; git commit -m "Release ***"
 $ debmake -d -b:py3 -i pdebuild
----

The last command does 3 things:

* Generate the upstream tarball. (*-d* == *./setup.py sdist*)
* Generate the source tree with **debian/*** copied from the VCS.
* Build binary packages in the chroot. ("*-i pdebuild*")

Then you register the result into 3 branches of the git repository.

----
 $ gbp import-dsc --pristine-tar ../debmake_*-*.dsc
----

* The **upstream** branch registers the upstream tarball contents.
* The **main** branch registers the Debian source tree contents with **debian/***.
* The **pristine-tar** branch registers the ***.orig.tar.gz** file contents.

